<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.537">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>R for the Psychology Student - Data Preparation - Qualtrics</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../supplemental/github_copilot.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.css" rel="stylesheet">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<link href="../site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet">
<script src="../site_libs/pagedtable-1.1/js/pagedtable.js"></script>


<link rel="stylesheet" href="../styles.css">
</head>

<body class="nav-sidebar docked">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../supplemental/tips-tricks.html">Supplemental</a></li><li class="breadcrumb-item"><a href="../supplemental/data-prep-qualtrics.html">Data Prep - Qualtrics</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto">
    <div class="pt-lg-2 mt-2 text-center sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="../">R for the Psychology Student</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Course Information</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../what-is-R.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">What is R?</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../prerequisites.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Prerequisites</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Classes</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../classes/class-1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Class 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../classes/class-2.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Class 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../classes/class-3.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Class 3</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../classes/class-4.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Class 4</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../classes/class-5.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Class 5</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../classes/class-6.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Class 6</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../classes/class-7.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Class 7</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../classes/class-8.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Class 8</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Supplemental</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../supplemental/tips-tricks.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tips &amp; Tricks</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../supplemental/github_copilot.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GitHub Copilot</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../supplemental/data-prep-qualtrics.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">Data Prep - Qualtrics</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#github-copilot-in-rstudio" id="toc-github-copilot-in-rstudio" class="nav-link active" data-scroll-target="#github-copilot-in-rstudio">GitHub Copilot in RStudio</a></li>
  <li><a href="#setup-project" id="toc-setup-project" class="nav-link" data-scroll-target="#setup-project">Setup Project</a></li>
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  <li><a href="#template-r-script" id="toc-template-r-script" class="nav-link" data-scroll-target="#template-r-script">Template R Script</a></li>
  <li><a href="#setup" id="toc-setup" class="nav-link" data-scroll-target="#setup">Setup</a></li>
  <li><a href="#import-data" id="toc-import-data" class="nav-link" data-scroll-target="#import-data">Import Data</a></li>
  <li><a href="#tidy-data" id="toc-tidy-data" class="nav-link" data-scroll-target="#tidy-data">Tidy Data</a>
  <ul class="collapse">
  <li><a href="#understanding-the-messy-raw-data-file" id="toc-understanding-the-messy-raw-data-file" class="nav-link" data-scroll-target="#understanding-the-messy-raw-data-file">Understanding the Messy Raw Data File</a></li>
  <li><a href="#tidying-up" id="toc-tidying-up" class="nav-link" data-scroll-target="#tidying-up">Tidying Up</a>
  <ul class="collapse">
  <li><a href="#separate-questionnaires" id="toc-separate-questionnaires" class="nav-link" data-scroll-target="#separate-questionnaires">Separate Questionnaires</a></li>
  </ul></li>
  <li><a href="#convert-to-long-format" id="toc-convert-to-long-format" class="nav-link" data-scroll-target="#convert-to-long-format">Convert to Long Format</a></li>
  <li><a href="#add-and-modify-columns" id="toc-add-and-modify-columns" class="nav-link" data-scroll-target="#add-and-modify-columns">Add and Modify Columns</a></li>
  <li><a href="#reorder-columns" id="toc-reorder-columns" class="nav-link" data-scroll-target="#reorder-columns">Reorder Columns</a></li>
  </ul></li>
  <li><a href="#save-data" id="toc-save-data" class="nav-link" data-scroll-target="#save-data">Save Data</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../supplemental/tips-tricks.html">Supplemental</a></li><li class="breadcrumb-item"><a href="../supplemental/data-prep-qualtrics.html">Data Prep - Qualtrics</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">Data Preparation - Qualtrics</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p>In <a href="lectures/lectures-class-4.html">Class 4</a>, we saw that the first stage in the data processing workflow is <strong>data preparation</strong>. This is a critical, though often overlooked stepped.</p>
<p>There are certain considerations that need to be made when working with data generated from a Qualtrics Survey (a popular survey tool used in psychology and other fields). This guide is meant to help you figure out the steps you need to take in order to <strong>prepare</strong> your data from a Qualtrics Survey for scoring and analysis. The end product of this <strong>data preparation</strong> stage is one or more tidy raw data files.</p>
<p>This guide assumes you have completed Classes 1 - 4. You should reference materials in those classes to help you at this stage.</p>
<section id="github-copilot-in-rstudio" class="level1">
<h1>GitHub Copilot in RStudio</h1>
<p>Not required, but you might find it useful to <a href="https://dr-jt.github.io/r-for-psychology-students/supplemental/github_copilot.html" target="_blank">setup GitHub Copilot in RStudio</a> to have an AI assistant help you write code. I find it useful for writing tedious repetitive code that is often required during this data preparation stage.</p>
</section>
<section id="setup-project" class="level1">
<h1>Setup Project</h1>
<p>Your project should be stored on a shared drive (e.g., Dropbox, OneDrive, Google Drive) so that all your team members can access it.</p>
<ol type="1">
<li>Create a folder for your project that contains the three following folders</li>
</ol>
<p>📁 analyses</p>
<p>📁 data</p>
<p>📁 R</p>
<ol start="2" type="1">
<li>Inside of the <strong>data</strong> folder create a <strong>raw</strong> folder</li>
</ol>
<p>📁 data</p>
<p>&nbsp;&nbsp;&nbsp;📁 raw</p>
<ul>
<li><p>If you have multiple raw data files you may consider creating an organization like this</p>
<p><img src="images/folder_organization.png" class="img-fluid" width="173"></p></li>
</ul>
<ol start="2" type="1">
<li>Create an <a href="../lectures/lectures-class-4.html#rstudio-projects">RStudio Project</a>:</li>
</ol>
<blockquote class="blockquote">
<p>File -&gt; New Project… -&gt; Existing Directory</p>
</blockquote>
</section>
<section id="data" class="level1">
<h1>Data</h1>
<ol type="1">
<li><p>In your study on Qualtrics go to the <strong>Data &amp; Analysis</strong> tab</p></li>
<li><p>Download the data as a <strong>.csv</strong> file</p></li>
<li><p>Move the downloaded data file to your <strong>data/raw</strong> or <strong>data/raw/messy</strong> folder</p></li>
<li><p>Rename the data file to something shorter (e.g., rawdata_messy.csv)</p>
<ul>
<li>If you have multiple raw data files you should name the data files that correspond to what measure it came from</li>
</ul></li>
</ol>
</section>
<section id="template-r-script" class="level1">
<h1>Template R Script</h1>
<p>The main goal at this stage is to complete an R script to create tidy raw data files from messy raw data files. A tidy raw data file is just a cleaned up version of the original raw data file that is easier to understand and is formatted in a way that makes it easy to use.</p>
<ol type="1">
<li>Create a new R script file named: <strong>1_tidyraw.R</strong>
<ul>
<li>If you have multiple messy raw data files, you should create separate tidy scripts for each one and name the script file with the measure that it comes from (you can keep the 1_ prefix for all of them).</li>
</ul></li>
<li>Save it in the <strong>R</strong> folder</li>
<li>Copy and paste this template into your script: (use the copy icon button on the top-right)</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Setup -------------------------------------------------------------------</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># packages</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(qualtRics) <span class="co"># you will need to first install this package</span></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Import Data -------------------------------------------------------------</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>data_import <span class="ot">&lt;-</span> <span class="fu">read_survey</span>(<span class="fu">here</span>(<span class="st">"data/raw"</span>, <span class="st">"rawdata_messy.csv"</span>))</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Tidy Data ---------------------------------------------------------------</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>data_survey1 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>()</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a>data_survey2 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>() <span class="sc">|&gt;</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>()</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a><span class="co"># ---- Save Data ---------------------------------------------------------------</span></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(data_survey1, <span class="fu">here</span>(<span class="st">"data/raw"</span>, <span class="st">"survey1_tidy.csv"</span>))</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(data_survey2, <span class="fu">here</span>(<span class="st">"data/raw"</span>, <span class="st">"survey2_tidy.csv"</span>))</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="co"># ------------------------------------------------------------------------------</span></span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="fu">rm</span>(<span class="at">list =</span> <span class="fu">ls</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol start="4" type="1">
<li>Use the 1_tidyraw.R script template to get <strong>started</strong>. It is just a template, you will need to modify it for your data specifically. The template contains 4 main sections:
<ul>
<li>Setup</li>
<li>Import Data</li>
<li>Tidy Data</li>
<li>Save Data</li>
</ul></li>
</ol>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>If you have multiple messy raw data files then you should create a separate <strong>tidyraw</strong> script for each one.</p>
<p>However, if you only have one raw data file because your data is all collected on a single Qualtrics Survey then you can just create one <strong>tidyraw</strong> script</p>
</div>
</div>
</section>
<section id="setup" class="level1">
<h1>Setup</h1>
<p>The <strong>Setup</strong> section is to load any packages used in the script.</p>
<p>Qualtrics does not make it easy to import data into R. Read about it <a href="https://www.adrianbruegger.com/post/import-qualtrics-csv-files/" target="_blank">here</a></p>
<p>However, someone has created a function <code>read_survey()</code> to import data from Qualtrics. You will need to install the <code>qualtRics</code> package first.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"qualtRics"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>You might also need to install the <code>stringr</code> package for later on</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">"stringr"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-warning callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>These should not go in your R script! Just type them directly in the Console window</p>
</div>
</div>
</section>
<section id="import-data" class="level1">
<h1>Import Data</h1>
<p>The <strong>Import Data</strong> section is simply to import the data. Use <code>read_survey()</code> to import your Qualtrics Survey data.</p>
<p>I suggest using the <code>here()</code> package to specify the file path. This was covered in <a href="../lectures/lectures-class-4.html#herehere">Class 4</a>.</p>
</section>
<section id="tidy-data" class="level1">
<h1>Tidy Data</h1>
<p>The <strong>Tidy Data</strong> section is where most of the work needs to be done. You should be using <code>dplyr</code> and <code>tidyr</code> to do most of the work here, though you may need other packages and functions. You can delete whatever is in there now, that is just a placeholder as an example of the type of functions you might use. See the following class materials to help you in this section:</p>
<ul>
<li><p><a href="https://dr-jt.github.io/r-for-psychology-students/classes/class-2.html" target="_blank">Class 2: Importing, Merging, and Restructuring</a></p></li>
<li><p><a href="https://dr-jt.github.io/r-for-psychology-students/classes/class-3.html" data-taget="_blank">Class 3: Data Transformation</a></p></li>
</ul>
<section id="understanding-the-messy-raw-data-file" class="level2">
<h2 class="anchored" data-anchor-id="understanding-the-messy-raw-data-file">Understanding the Messy Raw Data File</h2>
<p>You should take some time to better understand your messy raw data file:</p>
<p>Use functions, such as <code>colnames()</code> and <code>unique()</code>, that we learned in <a href="https://dr-jt.github.io/r-for-psychology-students/lectures/lectures-class-1.html#sec-data-frames" target="_blank">Class 1: An Introduction to Working with Data in R</a> to explore your imported data file.</p>
<ol type="1">
<li>In a document, write down the column names that go with each questionnaire/scale. If the scale has subscales within it, note which column names go with those subscales.</li>
<li>Which column is associated with unique IDs for each participant?</li>
<li>Are there any other columns that are important?</li>
<li>For <strong>each</strong> questionnaire/scale how are responses recorded?
<ul>
<li>Numeric? What is the range of possible values?</li>
<li>Character? What are the response options?
<ul>
<li>e.g.&nbsp;strongly disagree, disagree, agree, strongly disagree</li>
</ul></li>
</ul></li>
</ol>
<p>The amount of time it took for you to do those steps is <strong>the reason</strong> we are doing this data preparation step. The end product will hopefully be a tidy raw data file that is way easier to understand, even for someone that was not involved in the project.</p>
<p>For example you might have a data frame that is structured like this</p>
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Q21.."],"name":[2],"type":["chr"],"align":["left"]},{"label":["Q22.."],"name":[3],"type":["chr"],"align":["left"]},{"label":["Q23.."],"name":[4],"type":["chr"],"align":["left"]},{"label":["SQ_S1"],"name":[5],"type":["chr"],"align":["left"]},{"label":["SQ_S2"],"name":[6],"type":["chr"],"align":["left"]},{"label":["SQ_P3"],"name":[7],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"sometimes","3":"rarely","4":"sometimes","5":"NA","6":"NA","7":"NA"},{"1":"14","2":"always","3":"often","4":"never","5":"strongly agree","6":"agree","7":"disagree"},{"1":"15","2":"never","3":"always","4":"almost never","5":"disagree","6":"strongly disagree","7":"agree"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
<p>Are you able to understand what questionnaires/scales this data contain? And which questions go together?</p>
<p>There is a bit of structure in the column names but that is about it. By the end of this guide we will create a <strong>tidy</strong> version of this <strong>messy</strong> data file.</p>
</section>
<section id="tidying-up" class="level2">
<h2 class="anchored" data-anchor-id="tidying-up">Tidying Up</h2>
<p>How you need to tidy up your data file will depend on the nature of your Qualtrics study used to generate your data. However, there are some common messy problems we can address for Qualtrics Survey data.</p>
<p>One problem is that if you have multiple questionnaires with many items, then there are probably way too many columns to sort through. (this is not the case with our example data because I am keeping it simple)</p>
<p>Another major problem with the messy raw data from Qualtrics is that everything is spread across columns (wide format). When that is the case, we cannot visually group certain columns together making it challenging to understand which questions/items go together. Let alone, the column names are often times meaningless.</p>
<p>Finally, there is information missing from the <strong>messy</strong> raw data file that can be added.</p>
<ul>
<li><p>The name or acronym of the questionnaire</p></li>
<li><p>If there are subscales: the name of those scales and which items correspond to which subscale</p></li>
</ul>
<p>You can address these problems with your data by:</p>
<ol type="1">
<li>Creating a separate data frame for each questionnaire: <code>select()</code></li>
<li>Converting the data frame to long format: <code>pivot_longer()</code></li>
<li>Add and modify columns to make the data easier to understand: <code>mutate()</code> and <code>case_when()</code></li>
</ol>
<p>Notice in the script template I laid out the general format for this.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>data_survey1 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>()</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>data_survey2 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>() <span class="sc">|&gt;</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="separate-questionnaires" class="level3">
<h3 class="anchored" data-anchor-id="separate-questionnaires">Separate Questionnaires</h3>
<p>Separating the questionnaires into different data frames is easy, but you need to know which column names go with which questionnaire first (which is why I had you do this above).</p>
<p>Use the <code>select()</code> function from <code>dplyr</code> . This will create a separate data frame that only contains columns corresponding to a single questionnaire.</p>
<p>For example</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-1-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-1" role="tab" aria-controls="tabset-1-1" aria-selected="true" aria-current="page">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-1-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-1-2" role="tab" aria-controls="tabset-1-2" aria-selected="false">Data Frames</a></li></ul>
<div class="tab-content">
<div id="tabset-1-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-1-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb5" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>data_survey1 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Q21.., Q22.., Q23..)</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a>data_survey2 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, SQ_S1, SQ_S2, SQ_P3)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-important callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<ul>
<li><p>You need to use the special type of quotation marks <code>` `</code> if your column names contain special charaters like: a space, <code>$</code>, <code>%</code>, <code>-</code>, and more…</p></li>
<li><p>You should also keep a column corresponding to the unique participant ID</p></li>
</ul>
</div>
</div>
<p>View the <strong>Data Frames</strong> tab to see the resulting data frames</p>
</div>
<div id="tabset-1-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-1-2-tab">
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Q21.."],"name":[2],"type":["chr"],"align":["left"]},{"label":["Q22.."],"name":[3],"type":["chr"],"align":["left"]},{"label":["Q23.."],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"sometimes","3":"rarely","4":"sometimes"},{"1":"14","2":"always","3":"often","4":"never"},{"1":"15","2":"never","3":"always","4":"almost never"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["SQ_S1"],"name":[2],"type":["chr"],"align":["left"]},{"label":["SQ_S2"],"name":[3],"type":["chr"],"align":["left"]},{"label":["SQ_P3"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"NA","3":"NA","4":"NA"},{"1":"14","2":"strongly agree","3":"agree","4":"disagree"},{"1":"15","2":"disagree","3":"strongly disagree","4":"agree"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
</section>
<section id="convert-to-long-format" class="level2">
<h2 class="anchored" data-anchor-id="convert-to-long-format">Convert to Long Format</h2>
<p>It is still not clear from the data frame whether there are subscales and which items go together. This is where converting the data frame to a long format can make this data easy to understand and work with.</p>
<p>Use the <code>pivot_longer()</code> function from <code>tidyr</code> to do this. Again, notice in the script template I laid out the general format for this. You can pipe the result of <code>select()</code> onto <code>pivot_longer()</code> . This will produce a data frame that has one row for every item in the questionnaire/scale and a single column with all the responses.</p>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Reference materials from <a href="../lectures/lectures-class-2.html">Class 2</a> for how to use <code>pivot_longer()</code></p>
</div>
</div>
<p>Using the sample tables from above we might do something like</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-2-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-1" role="tab" aria-controls="tabset-2-1" aria-selected="true">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-2-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-2-2" role="tab" aria-controls="tabset-2-2" aria-selected="false">Data Frames</a></li></ul>
<div class="tab-content">
<div id="tabset-2-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-2-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb6" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>data_survey1 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Q21.., Q22.., Q23..) <span class="sc">|&gt;</span></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"Q"</span>),</span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>)</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>data_survey2 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>),</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>View the <strong>Data Frames</strong> tab to see the resulting data frames</p>
</div>
<div id="tabset-2-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-2-2-tab">
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Item"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Response"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"Q21..","3":"sometimes"},{"1":"13","2":"Q22..","3":"rarely"},{"1":"13","2":"Q23..","3":"sometimes"},{"1":"14","2":"Q21..","3":"always"},{"1":"14","2":"Q22..","3":"often"},{"1":"14","2":"Q23..","3":"never"},{"1":"15","2":"Q21..","3":"never"},{"1":"15","2":"Q22..","3":"always"},{"1":"15","2":"Q23..","3":"almost never"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Item"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Response"],"name":[3],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"SQ_S1","3":"NA"},{"1":"13","2":"SQ_S2","3":"NA"},{"1":"13","2":"SQ_P3","3":"NA"},{"1":"14","2":"SQ_S1","3":"strongly agree"},{"1":"14","2":"SQ_S2","3":"agree"},{"1":"14","2":"SQ_P3","3":"disagree"},{"1":"15","2":"SQ_S1","3":"disagree"},{"1":"15","2":"SQ_S2","3":"strongly disagree"},{"1":"15","2":"SQ_P3","3":"agree"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="add-and-modify-columns" class="level2">
<h2 class="anchored" data-anchor-id="add-and-modify-columns">Add and Modify Columns</h2>
<p>We can then:</p>
<ul>
<li><p>Create a column for the name of the questionnaire</p></li>
<li><p>Clean up the values in the <code>Item</code> column</p></li>
<li><p>Create a column containing information about subscales (if there are any)</p></li>
<li><p>Recode values int he <code>Response</code> column</p></li>
</ul>
<p>Creating the name of the questionnaire is easy using <code>mutate()</code></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-3-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-1" role="tab" aria-controls="tabset-3-1" aria-selected="true">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-3-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-3-2" role="tab" aria-controls="tabset-3-2" aria-selected="false">Data Frames</a></li></ul>
<div class="tab-content">
<div id="tabset-3-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-3-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb7" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>data_survey1 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Q21.., Q22.., Q23..) <span class="sc">|&gt;</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"Q"</span>),</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Questionnaire =</span> <span class="st">"ERI"</span>)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a>data_survey2 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>),</span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>) <span class="sc">|&gt;</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Questionnaire =</span> <span class="st">"SCS"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>View the <strong>Data Frames</strong> tab to see the resulting data frames</p>
</div>
<div id="tabset-3-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-3-2-tab">
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Item"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Response"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Questionnaire"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"Q21..","3":"sometimes","4":"ERI"},{"1":"13","2":"Q22..","3":"rarely","4":"ERI"},{"1":"13","2":"Q23..","3":"sometimes","4":"ERI"},{"1":"14","2":"Q21..","3":"always","4":"ERI"},{"1":"14","2":"Q22..","3":"often","4":"ERI"},{"1":"14","2":"Q23..","3":"never","4":"ERI"},{"1":"15","2":"Q21..","3":"never","4":"ERI"},{"1":"15","2":"Q22..","3":"always","4":"ERI"},{"1":"15","2":"Q23..","3":"almost never","4":"ERI"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Item"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Response"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Questionnaire"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"SQ_S1","3":"NA","4":"SCS"},{"1":"13","2":"SQ_S2","3":"NA","4":"SCS"},{"1":"13","2":"SQ_P3","3":"NA","4":"SCS"},{"1":"14","2":"SQ_S1","3":"strongly agree","4":"SCS"},{"1":"14","2":"SQ_S2","3":"agree","4":"SCS"},{"1":"14","2":"SQ_P3","3":"disagree","4":"SCS"},{"1":"15","2":"SQ_S1","3":"disagree","4":"SCS"},{"1":"15","2":"SQ_S2","3":"strongly disagree","4":"SCS"},{"1":"15","2":"SQ_P3","3":"agree","4":"SCS"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
<p>To clean up values in <code>Item</code> you can use the <code>str_remove()</code> function from <code>stringr</code> . You might want to convert <code>Item</code> to numeric if you remove <strong>all</strong> string character values.</p>
<p><a href="https://stringr.tidyverse.org/reference/index.html" target="_blank">See the stringr documentation</a> for convenient functions for working with non-numeric values.</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-4-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-1" role="tab" aria-controls="tabset-4-1" aria-selected="true">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-4-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-4-2" role="tab" aria-controls="tabset-4-2" aria-selected="false">Data Frames</a></li></ul>
<div class="tab-content">
<div id="tabset-4-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-4-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb8" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a>data_survey1 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Q21.., Q22.., Q23..) <span class="sc">|&gt;</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"Q"</span>),</span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Questionnaire =</span> <span class="st">"ERI"</span>,</span>
<span id="cb8-7"><a href="#cb8-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"Q2"</span>),</span>
<span id="cb8-8"><a href="#cb8-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"</span><span class="sc">\\</span><span class="st">.."</span>),</span>
<span id="cb8-9"><a href="#cb8-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">as.numeric</span>(Item))</span>
<span id="cb8-10"><a href="#cb8-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-11"><a href="#cb8-11" aria-hidden="true" tabindex="-1"></a>data_survey2 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb8-12"><a href="#cb8-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb8-13"><a href="#cb8-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>),</span>
<span id="cb8-14"><a href="#cb8-14" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb8-15"><a href="#cb8-15" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>) <span class="sc">|&gt;</span></span>
<span id="cb8-16"><a href="#cb8-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Questionnaire =</span> <span class="st">"SCS"</span>,</span>
<span id="cb8-17"><a href="#cb8-17" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"SQ_"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>I used the notation <code>"\\.."</code> to remove trailing periods. The <code>\\</code> were required because a <code>.</code> serves as a special notation in R and <code>dplyr</code> syntax. <code>\\</code> in many languages says treat <code>.</code> as a literal period not as a special notation.</p>
</div>
</div>
<p>View the <strong>Data Frames</strong> tab to see the resulting data frames</p>
</div>
<div id="tabset-4-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-4-2-tab">
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Item"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Response"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Questionnaire"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"1","3":"sometimes","4":"ERI"},{"1":"13","2":"2","3":"rarely","4":"ERI"},{"1":"13","2":"3","3":"sometimes","4":"ERI"},{"1":"14","2":"1","3":"always","4":"ERI"},{"1":"14","2":"2","3":"often","4":"ERI"},{"1":"14","2":"3","3":"never","4":"ERI"},{"1":"15","2":"1","3":"never","4":"ERI"},{"1":"15","2":"2","3":"always","4":"ERI"},{"1":"15","2":"3","3":"almost never","4":"ERI"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Item"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Response"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Questionnaire"],"name":[4],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"S1","3":"NA","4":"SCS"},{"1":"13","2":"S2","3":"NA","4":"SCS"},{"1":"13","2":"P3","3":"NA","4":"SCS"},{"1":"14","2":"S1","3":"strongly agree","4":"SCS"},{"1":"14","2":"S2","3":"agree","4":"SCS"},{"1":"14","2":"P3","3":"disagree","4":"SCS"},{"1":"15","2":"S1","3":"disagree","4":"SCS"},{"1":"15","2":"S2","3":"strongly disagree","4":"SCS"},{"1":"15","2":"P3","3":"agree","4":"SCS"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
<p>If there are subscales, we can create a column with information about which items belong to which subscale. You should have identified this information for your data in the steps above. (If there are no subscales then you do not need this step).</p>
<p>We can use <code>case_when()</code> from <code>dplyr()</code> to do this.</p>
<p>For this sample data:</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-5-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-1" role="tab" aria-controls="tabset-5-1" aria-selected="true">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-5-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-5-2" role="tab" aria-controls="tabset-5-2" aria-selected="false">Data Frames</a></li></ul>
<div class="tab-content">
<div id="tabset-5-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-5-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb9" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>data_survey1 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Q21.., Q22.., Q23..) <span class="sc">|&gt;</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"Q"</span>),</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Questionnaire =</span> <span class="st">"ERI"</span>,</span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"Q2"</span>),</span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"</span><span class="sc">\\</span><span class="st">.."</span>),</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">as.numeric</span>(Item),</span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">Subscale =</span> <span class="fu">case_when</span>(<span class="fu">between</span>(Item, <span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Emotion_Regulation"</span>,</span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>                              Item <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Emotion_Reappraisal"</span>))</span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>data_survey2 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>),</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>) <span class="sc">|&gt;</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Questionnaire =</span> <span class="st">"SCS"</span>,</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"SQ_"</span>),</span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>         <span class="at">Subscale =</span> </span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(Item <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"S1"</span>, <span class="st">"S2"</span>) <span class="sc">~</span> <span class="st">"Friendship_Quality"</span>,</span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>                     Item <span class="sc">==</span> <span class="st">"P3"</span> <span class="sc">~</span> <span class="st">"Community_Engagement"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-style-default callout-note callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>Note that in <code>case_when()</code> I am just providing you with different options you can use as a shorthand.</p>
<ul>
<li><p><code>between()</code> is for numeric values and results in TRUE when a value is within a certain range. In this example the range is dumb, just 1 to 2.</p></li>
<li><p><code>Item %in% c("S1", "S2")</code> reads as: Is Item in this list of “S1”, “S2”?. If Item is in this list, then set Subscale to “Friendship_Quality”</p></li>
</ul>
<p>Alternatively, you can do this in a longer format using a series of <code>==</code> for every single item:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="fu">case_when</span>(Item <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="st">"Emotion_Regulation"</span>,</span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a>          Item <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="st">"Emotoin_Regulation"</span>,</span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>          Item <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Emotion_Reappraisal"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>But you can see that this can get quite tedious when you have a lot of items in one scale.</p>
</div>
</div>
<p>View the <strong>Data Frames</strong> tab to see the resulting data frames</p>
</div>
<div id="tabset-5-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-5-2-tab">
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Item"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Response"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Questionnaire"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Subscale"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"1","3":"sometimes","4":"ERI","5":"Emotion_Regulation"},{"1":"13","2":"2","3":"rarely","4":"ERI","5":"Emotion_Regulation"},{"1":"13","2":"3","3":"sometimes","4":"ERI","5":"Emotion_Reappraisal"},{"1":"14","2":"1","3":"always","4":"ERI","5":"Emotion_Regulation"},{"1":"14","2":"2","3":"often","4":"ERI","5":"Emotion_Regulation"},{"1":"14","2":"3","3":"never","4":"ERI","5":"Emotion_Reappraisal"},{"1":"15","2":"1","3":"never","4":"ERI","5":"Emotion_Regulation"},{"1":"15","2":"2","3":"always","4":"ERI","5":"Emotion_Regulation"},{"1":"15","2":"3","3":"almost never","4":"ERI","5":"Emotion_Reappraisal"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Item"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Response"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Questionnaire"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Subscale"],"name":[5],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"S1","3":"NA","4":"SCS","5":"Friendship_Quality"},{"1":"13","2":"S2","3":"NA","4":"SCS","5":"Friendship_Quality"},{"1":"13","2":"P3","3":"NA","4":"SCS","5":"Community_Engagement"},{"1":"14","2":"S1","3":"strongly agree","4":"SCS","5":"Friendship_Quality"},{"1":"14","2":"S2","3":"agree","4":"SCS","5":"Friendship_Quality"},{"1":"14","2":"P3","3":"disagree","4":"SCS","5":"Community_Engagement"},{"1":"15","2":"S1","3":"disagree","4":"SCS","5":"Friendship_Quality"},{"1":"15","2":"S2","3":"strongly disagree","4":"SCS","5":"Friendship_Quality"},{"1":"15","2":"P3","3":"agree","4":"SCS","5":"Community_Engagement"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
<p>You may want to create an additional column that converts the <code>Response</code> into numeric (or vice versa if it is already in numeric you may want to convert it to a character string).</p>
<p>Again we can use <code>case_when()</code></p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-6-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-1" role="tab" aria-controls="tabset-6-1" aria-selected="true">Code</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-6-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-6-2" role="tab" aria-controls="tabset-6-2" aria-selected="false">Data Frames</a></li></ul>
<div class="tab-content">
<div id="tabset-6-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-6-1-tab">
<div class="cell">
<div class="sourceCode cell-code" id="cb11" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>data_survey1 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Q21.., Q22.., Q23..) <span class="sc">|&gt;</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"Q"</span>),</span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Questionnaire =</span> <span class="st">"ERI"</span>,</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"Q2"</span>),</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"</span><span class="sc">\\</span><span class="st">.."</span>),</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">as.numeric</span>(Item),</span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">Subscale =</span> <span class="fu">case_when</span>(<span class="fu">between</span>(Item, <span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Emotion_Regulation"</span>,</span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>                              Item <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Emotion_Reappraisal"</span>),</span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">Response_Code =</span> <span class="fu">case_when</span>(Response <span class="sc">==</span> <span class="st">"never"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"almost never"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"rarely"</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"sometimes"</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"often"</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"almost always"</span> <span class="sc">~</span> <span class="dv">6</span>,</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"always"</span> <span class="sc">~</span> <span class="dv">7</span>))</span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>data_survey2 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb11-22"><a href="#cb11-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>),</span>
<span id="cb11-23"><a href="#cb11-23" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb11-24"><a href="#cb11-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>) <span class="sc">|&gt;</span></span>
<span id="cb11-25"><a href="#cb11-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Questionnaire =</span> <span class="st">"SCS"</span>,</span>
<span id="cb11-26"><a href="#cb11-26" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"SQ_"</span>),</span>
<span id="cb11-27"><a href="#cb11-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">Subscale =</span> </span>
<span id="cb11-28"><a href="#cb11-28" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(Item <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"S1"</span>, <span class="st">"S2"</span>) <span class="sc">~</span> <span class="st">"Friendship_Quality"</span>,</span>
<span id="cb11-29"><a href="#cb11-29" aria-hidden="true" tabindex="-1"></a>                     Item <span class="sc">==</span> <span class="st">"P3"</span> <span class="sc">~</span> <span class="st">"Community_Engagement"</span>),</span>
<span id="cb11-30"><a href="#cb11-30" aria-hidden="true" tabindex="-1"></a>         <span class="at">Response_Code =</span> </span>
<span id="cb11-31"><a href="#cb11-31" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(Response <span class="sc">==</span> <span class="st">"strongly disagree"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb11-32"><a href="#cb11-32" aria-hidden="true" tabindex="-1"></a>                     Response <span class="sc">==</span> <span class="st">"disagree"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb11-33"><a href="#cb11-33" aria-hidden="true" tabindex="-1"></a>                     Response <span class="sc">==</span> <span class="st">"neither agree nor disagree"</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb11-34"><a href="#cb11-34" aria-hidden="true" tabindex="-1"></a>                     Response <span class="sc">==</span> <span class="st">"agree"</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb11-35"><a href="#cb11-35" aria-hidden="true" tabindex="-1"></a>                     Response <span class="sc">==</span> <span class="st">"strongly agree"</span> <span class="sc">~</span> <span class="dv">5</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>View the <strong>Data Frames</strong> tab to see the resulting data frames</p>
</div>
<div id="tabset-6-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-6-2-tab">
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Item"],"name":[2],"type":["dbl"],"align":["right"]},{"label":["Response"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Questionnaire"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Subscale"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Response_Code"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"13","2":"1","3":"sometimes","4":"ERI","5":"Emotion_Regulation","6":"4"},{"1":"13","2":"2","3":"rarely","4":"ERI","5":"Emotion_Regulation","6":"3"},{"1":"13","2":"3","3":"sometimes","4":"ERI","5":"Emotion_Reappraisal","6":"4"},{"1":"14","2":"1","3":"always","4":"ERI","5":"Emotion_Regulation","6":"7"},{"1":"14","2":"2","3":"often","4":"ERI","5":"Emotion_Regulation","6":"5"},{"1":"14","2":"3","3":"never","4":"ERI","5":"Emotion_Reappraisal","6":"1"},{"1":"15","2":"1","3":"never","4":"ERI","5":"Emotion_Regulation","6":"1"},{"1":"15","2":"2","3":"always","4":"ERI","5":"Emotion_Regulation","6":"7"},{"1":"15","2":"3","3":"almost never","4":"ERI","5":"Emotion_Reappraisal","6":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Item"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Response"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Questionnaire"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Subscale"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Response_Code"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"13","2":"S1","3":"NA","4":"SCS","5":"Friendship_Quality","6":"NA"},{"1":"13","2":"S2","3":"NA","4":"SCS","5":"Friendship_Quality","6":"NA"},{"1":"13","2":"P3","3":"NA","4":"SCS","5":"Community_Engagement","6":"NA"},{"1":"14","2":"S1","3":"strongly agree","4":"SCS","5":"Friendship_Quality","6":"5"},{"1":"14","2":"S2","3":"agree","4":"SCS","5":"Friendship_Quality","6":"4"},{"1":"14","2":"P3","3":"disagree","4":"SCS","5":"Community_Engagement","6":"2"},{"1":"15","2":"S1","3":"disagree","4":"SCS","5":"Friendship_Quality","6":"2"},{"1":"15","2":"S2","3":"strongly disagree","4":"SCS","5":"Friendship_Quality","6":"1"},{"1":"15","2":"P3","3":"agree","4":"SCS","5":"Community_Engagement","6":"4"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="reorder-columns" class="level2">
<h2 class="anchored" data-anchor-id="reorder-columns">Reorder Columns</h2>
<p>Finally, we may want to reorder the columns in a way that makes more sense using <code>select()</code>:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb12" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a>data_survey1 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Q21.., Q22.., Q23..) <span class="sc">|&gt;</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"Q"</span>),</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Questionnaire =</span> <span class="st">"ERI"</span>,</span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"Q2"</span>),</span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"</span><span class="sc">\\</span><span class="st">.."</span>),</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">as.numeric</span>(Item),</span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a>         <span class="at">Subscale =</span> <span class="fu">case_when</span>(<span class="fu">between</span>(Item, <span class="dv">1</span>,<span class="dv">2</span>) <span class="sc">~</span> <span class="st">"Emotion_Regulation"</span>,</span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a>                              Item <span class="sc">==</span> <span class="dv">3</span> <span class="sc">~</span> <span class="st">"Emotion_Reappraisal"</span>),</span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a>         <span class="at">Response_Code =</span> <span class="fu">case_when</span>(Response <span class="sc">==</span> <span class="st">"never"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"almost never"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"rarely"</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb12-15"><a href="#cb12-15" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"sometimes"</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb12-16"><a href="#cb12-16" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"often"</span> <span class="sc">~</span> <span class="dv">5</span>,</span>
<span id="cb12-17"><a href="#cb12-17" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"almost always"</span> <span class="sc">~</span> <span class="dv">6</span>,</span>
<span id="cb12-18"><a href="#cb12-18" aria-hidden="true" tabindex="-1"></a>                                   Response <span class="sc">==</span> <span class="st">"always"</span> <span class="sc">~</span> <span class="dv">7</span>)) <span class="sc">|&gt;</span></span>
<span id="cb12-19"><a href="#cb12-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Questionnaire, Subscale, Item, Response, Response_Code)</span>
<span id="cb12-20"><a href="#cb12-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-21"><a href="#cb12-21" aria-hidden="true" tabindex="-1"></a>data_survey2 <span class="ot">&lt;-</span> data_import <span class="sc">|&gt;</span></span>
<span id="cb12-22"><a href="#cb12-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb12-23"><a href="#cb12-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">starts_with</span>(<span class="st">"SQ_"</span>),</span>
<span id="cb12-24"><a href="#cb12-24" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="st">"Item"</span>,</span>
<span id="cb12-25"><a href="#cb12-25" aria-hidden="true" tabindex="-1"></a>               <span class="at">values_to =</span> <span class="st">"Response"</span>) <span class="sc">|&gt;</span></span>
<span id="cb12-26"><a href="#cb12-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Questionnaire =</span> <span class="st">"SCS"</span>,</span>
<span id="cb12-27"><a href="#cb12-27" aria-hidden="true" tabindex="-1"></a>         <span class="at">Item =</span> <span class="fu">str_remove</span>(Item, <span class="st">"SQ_"</span>),</span>
<span id="cb12-28"><a href="#cb12-28" aria-hidden="true" tabindex="-1"></a>         <span class="at">Subscale =</span> </span>
<span id="cb12-29"><a href="#cb12-29" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(Item <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"S1"</span>, <span class="st">"S2"</span>) <span class="sc">~</span> <span class="st">"Friendship_Quality"</span>,</span>
<span id="cb12-30"><a href="#cb12-30" aria-hidden="true" tabindex="-1"></a>                     Item <span class="sc">==</span> <span class="st">"P3"</span> <span class="sc">~</span> <span class="st">"Community_Engagement"</span>),</span>
<span id="cb12-31"><a href="#cb12-31" aria-hidden="true" tabindex="-1"></a>         <span class="at">Response_Code =</span> </span>
<span id="cb12-32"><a href="#cb12-32" aria-hidden="true" tabindex="-1"></a>           <span class="fu">case_when</span>(Response <span class="sc">==</span> <span class="st">"strongly disagree"</span> <span class="sc">~</span> <span class="dv">1</span>,</span>
<span id="cb12-33"><a href="#cb12-33" aria-hidden="true" tabindex="-1"></a>                     Response <span class="sc">==</span> <span class="st">"disagree"</span> <span class="sc">~</span> <span class="dv">2</span>,</span>
<span id="cb12-34"><a href="#cb12-34" aria-hidden="true" tabindex="-1"></a>                     Response <span class="sc">==</span> <span class="st">"neither agree nor disagree"</span> <span class="sc">~</span> <span class="dv">3</span>,</span>
<span id="cb12-35"><a href="#cb12-35" aria-hidden="true" tabindex="-1"></a>                     Response <span class="sc">==</span> <span class="st">"agree"</span> <span class="sc">~</span> <span class="dv">4</span>,</span>
<span id="cb12-36"><a href="#cb12-36" aria-hidden="true" tabindex="-1"></a>                     Response <span class="sc">==</span> <span class="st">"strongly agree"</span> <span class="sc">~</span> <span class="dv">5</span>)) <span class="sc">|&gt;</span></span>
<span id="cb12-37"><a href="#cb12-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(ID, Questionnaire, Subscale, Item, Response, Response_Code)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>We now end up with tidy raw data frames</p>
<div class="tabset-margin-container"></div><div class="panel-tabset">
<ul class="nav nav-tabs" role="tablist"><li class="nav-item" role="presentation"><a class="nav-link active" id="tabset-7-1-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-1" role="tab" aria-controls="tabset-7-1" aria-selected="true">Tidy</a></li><li class="nav-item" role="presentation"><a class="nav-link" id="tabset-7-2-tab" data-bs-toggle="tab" data-bs-target="#tabset-7-2" role="tab" aria-controls="tabset-7-2" aria-selected="false">Messy</a></li></ul>
<div class="tab-content">
<div id="tabset-7-1" class="tab-pane active" role="tabpanel" aria-labelledby="tabset-7-1-tab">
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Questionnaire"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Subscale"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Item"],"name":[4],"type":["dbl"],"align":["right"]},{"label":["Response"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Response_Code"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"13","2":"ERI","3":"Emotion_Regulation","4":"1","5":"sometimes","6":"4"},{"1":"13","2":"ERI","3":"Emotion_Regulation","4":"2","5":"rarely","6":"3"},{"1":"13","2":"ERI","3":"Emotion_Reappraisal","4":"3","5":"sometimes","6":"4"},{"1":"14","2":"ERI","3":"Emotion_Regulation","4":"1","5":"always","6":"7"},{"1":"14","2":"ERI","3":"Emotion_Regulation","4":"2","5":"often","6":"5"},{"1":"14","2":"ERI","3":"Emotion_Reappraisal","4":"3","5":"never","6":"1"},{"1":"15","2":"ERI","3":"Emotion_Regulation","4":"1","5":"never","6":"1"},{"1":"15","2":"ERI","3":"Emotion_Regulation","4":"2","5":"always","6":"7"},{"1":"15","2":"ERI","3":"Emotion_Reappraisal","4":"3","5":"almost never","6":"2"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Questionnaire"],"name":[2],"type":["chr"],"align":["left"]},{"label":["Subscale"],"name":[3],"type":["chr"],"align":["left"]},{"label":["Item"],"name":[4],"type":["chr"],"align":["left"]},{"label":["Response"],"name":[5],"type":["chr"],"align":["left"]},{"label":["Response_Code"],"name":[6],"type":["dbl"],"align":["right"]}],"data":[{"1":"13","2":"SCS","3":"Friendship_Quality","4":"S1","5":"NA","6":"NA"},{"1":"13","2":"SCS","3":"Friendship_Quality","4":"S2","5":"NA","6":"NA"},{"1":"13","2":"SCS","3":"Community_Engagement","4":"P3","5":"NA","6":"NA"},{"1":"14","2":"SCS","3":"Friendship_Quality","4":"S1","5":"strongly agree","6":"5"},{"1":"14","2":"SCS","3":"Friendship_Quality","4":"S2","5":"agree","6":"4"},{"1":"14","2":"SCS","3":"Community_Engagement","4":"P3","5":"disagree","6":"2"},{"1":"15","2":"SCS","3":"Friendship_Quality","4":"S1","5":"disagree","6":"2"},{"1":"15","2":"SCS","3":"Friendship_Quality","4":"S2","5":"strongly disagree","6":"1"},{"1":"15","2":"SCS","3":"Community_Engagement","4":"P3","5":"agree","6":"4"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
<div id="tabset-7-2" class="tab-pane" role="tabpanel" aria-labelledby="tabset-7-2-tab">
<div class="cell">
<div class="cell-output-display">
<div data-pagedtable="false">
  <script data-pagedtable-source="" type="application/json">
{"columns":[{"label":["ID"],"name":[1],"type":["dbl"],"align":["right"]},{"label":["Q21.."],"name":[2],"type":["chr"],"align":["left"]},{"label":["Q22.."],"name":[3],"type":["chr"],"align":["left"]},{"label":["Q23.."],"name":[4],"type":["chr"],"align":["left"]},{"label":["SQ_S1"],"name":[5],"type":["chr"],"align":["left"]},{"label":["SQ_S2"],"name":[6],"type":["chr"],"align":["left"]},{"label":["SQ_P3"],"name":[7],"type":["chr"],"align":["left"]}],"data":[{"1":"13","2":"sometimes","3":"rarely","4":"sometimes","5":"NA","6":"NA","7":"NA"},{"1":"14","2":"always","3":"often","4":"never","5":"strongly agree","6":"agree","7":"disagree"},{"1":"15","2":"never","3":"always","4":"almost never","5":"disagree","6":"strongly disagree","7":"agree"}],"options":{"columns":{"min":{},"max":[10]},"rows":{"min":[10],"max":[10]},"pages":{}}}
  </script>
</div>
</div>
</div>
</div>
</div>
</div>
<p>You can see these data frames are much easier to understand and to work with. Someone outside of your project would have a decent understanding of what information is contained and what is being measured.</p>
<p><strong>You need to have your data in this type of format as it will be easier for you to start thinking about scoring and analyzing your data</strong></p>
</section>
</section>
<section id="save-data" class="level1">
<h1>Save Data</h1>
<p>I suggest saving a different <strong>tidy raw</strong> data file for each questionnaire/scale you have. This is because each one may have different ways of scoring the data, and different things to think about. It will also help keep your data files and scripts organized if you need to go back and modify them.</p>
<p>Store your tidy raw data files in <strong>data/raw</strong> and use the name of the scale in the file name.</p>
<p>We have not talked about the <code>write_csv()</code> function but it is pretty simple to use as you can see.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb13" data-source-line-numbers="nil" data-code-line-numbers="nil"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(data_survey1, <span class="fu">here</span>(<span class="st">"data/raw"</span>, <span class="st">"ERI_tidy.csv"</span>))</span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write_csv</span>(data_survey2, <span class="fu">here</span>(<span class="st">"data/raw"</span>, <span class="st">"SCS_tidy.csv"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      return note.innerHTML;
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="../supplemental/github_copilot.html" class="pagination-link  aria-label=" github="" copilot"="">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">GitHub Copilot</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->




<script src="../site_libs/quarto-contrib/line-highlight-1.0.0/line-highlight.js" defer="true"></script>
</body></html>